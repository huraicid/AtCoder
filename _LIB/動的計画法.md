# 動的計画法(DP Dynamic Programming)

動的計画法とは、以下の3つの特徴を持ったアルゴリズムである：
- 問題をいくつかの簡単な問題で小さな問題に分割
- それぞれの問題の計算結果を表に記録
- 同じ問題については表から計算結果を参照する

### 例1：フィボナッチ数列
フィボナッチ数列：
```
f(n) = f(n-1) + f(n-2); f(0) = f(1) = 1
```
を解くプログラムを考える。このプログラムを

- 初めて計算するときは、計算後に再帰呼び出しの計算結果をメモ
- １度求めている値はメモから参照する

という方針で作成すると、同じ値を２回以上計算することなく求められる。

```C++
#include <iostream>
#define N 10000 // 大きめに領域を確保しておく

using namespace std;

// グローバル変数
// 値をメモする配列
int dp[N] = { 0 };


//フィボナッチ数列を計算する関数。
int fib(int n) {
    if (n = 1) {
        return 1;
    }

    if (dp[n] == 0) {
    // 初めて計算するときは、計算後に再帰呼び出しの計算結果をメモする
        dp[n] = fib(n - 1) + fib(n - 2);
    }

    return dp[n];
}

int main()
{
    int n = 5;
    cout << fib(n) << endl;
}
```


### 例2：カエルの移動問題
#### --- 問題 ---
N個の足場があり、左からi番目の足場（足場iとする）の高さはh_iである。
カエルは以下の行動を繰り返すことで、足場1から足場Nに移動したい。
1. 足場iからi+1にジャンプする：体力|h_i - h_(i+1)|を消費する。
2. 足場iからi+2にジャンプする：体力|h_i - h_(i+2)|を消費する。

この時、消費する体力の合計値として考えられる最小値を求めよ。
![カエル](_img/flog.jpg)
- INPUT:
```
N
h_1 h_2 ... h_N
```
- OUT:
```
ans
```

#### --- 方針 ---
足場1からiまで移動するために消費する最小の体力をdp[i]とし、dp[1], dp[2], ... dp[N]の順に計算することを考える。

まず、足場1から1までは移動しなくてもたどり着けるため、dp[1] = 0となる。また、足場1から2までは直接ジャンプするしかないため。dp[2] = |h_1 - h_2|である。

次に、足場i(≥ 3)に移動する方法については以下の2つが考えられる：
1. 体力|h_(i-1) - h_i|を消費して、1個前の足場からジャンプする。
2. 体力|h_(i-2) - h_i|を消費して、2個前の足場からジャンプする。

それぞれの場合について、漸化式で次のように書くことができる：
1. dp[i] = dp[i-1] + |h_(i-1) - h_i|
2. dp[i] = dp[i-2] + |h_(i-2) - h_i|

求めるdp[i]は最小値であるから、上記の最小値をdp[i]とすればよい。

#### --- ソースコード ---
```C++
#include <iostream>
#include <cmath>    // abs()
using namespace std;

int main() {
    int N;
    cin >> N;

    int H[N+1];
    for(auto i = 1; i < N+1; i++) {
        cin >> H[i];
    }

    int dp[N+1];
    dp[1] = 0;
    dp[2] = abs(H[2] - H[1]);
    for(auto i = 3; i < N+1; i++) {
        int v1 = dp[i-1] + abs(H[i] - H[i-1]);
        int v2 = dp[i-2] + abs(H[i] - H[i-2]);
        dp[i] = min(v1, v2);
    }

    cout << dp[N] << endl;

    return 0;
}
```

## 参考
- 問題解決力を鍛える！アルゴリズムとデータ構造、pp.49-52
- うさぎでもわかるアルゴリズム　動的計画法：httpswww.momoyama-usagi.comentryinfo-algo-dp#f-beba4c95
